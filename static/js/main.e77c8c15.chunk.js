(this["webpackJsonpreact-client-app"]=this["webpackJsonpreact-client-app"]||[]).push([[0],{104:function(e,t,a){e.exports=a(138)},109:function(e,t,a){},110:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),i=(a(109),a(110),a(12)),l=a(188),s=a(19),u=a(192),m=a(174),p=a(189),d=a(83),g=a.n(d),f=a(57),h=a(169),b=a(171),E=Object(n.createContext)({}),v=function(e){var t=e.children,a=e.store;return r.a.createElement(E.Provider,{value:a},t)},j=a(31),O=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var x=Object(j.a)((function(){var e=O(),t=Object(i.f)(),a=Object(n.useState)(""),o=Object(s.a)(a,2),c=o[0],l=o[1],d=Object(n.useState)(""),h=Object(s.a)(d,2),v=h[0],j=h[1],x=Object(n.useContext)(E).userStore,y=x.isUserLogged;return Object(n.useEffect)((function(){if(y){t.push({pathname:"/home"})}})),r.a.createElement(b.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(u.a,{className:e.avatar},r.a.createElement(g.a,null)),r.a.createElement(f.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),x.authorizeUser(c,v)}},r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"User Name",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(e){return l(e.target.value)}}),r.a.createElement(p.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return j(e.target.value)}}),r.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:e.submit},"Sign In"),r.a.createElement(m.a,{color:"primary",onClick:function(){x.authorizeUser("jan","ASDasd123!")}},"Register"))))})),y=a(94),w=Object(h.a)((function(e){return{root:{marginTop:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},paper:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:e.spacing(2),padding:e.spacing(3)},item:{margin:e.spacing(2)}}})),k=Object(j.a)((function(){var e=w(),t=Object(n.useState)(0),a=Object(s.a)(t,2),o=a[0],c=a[1];return r.a.createElement(b.a,{className:e.root},r.a.createElement(f.a,{variant:"h3",component:"h2"},"Welcome in React SPA APP \ud83e\udd29!"),r.a.createElement(y.a,{className:e.paper},r.a.createElement(f.a,{className:e.item,variant:"h5",component:"h3",color:"primary"},"Click and see some magic!"),r.a.createElement(m.a,{variant:"contained",onClick:function(){return c(o+1)}},"+1"),r.a.createElement(f.a,{className:e.item,variant:"h6",component:"h4",color:"primary"},"Counter: ",o)))})),S=a(193),C=a(175),N=a(176),T=a(177),P=a(84),U=a.n(P),B=function(e){var t=e.children,a=e.to,n=Object(i.f)(),o={pathname:a};return r.a.createElement(m.a,{color:"inherit",onClick:function(){n.push(o)}},t)},I=a(194),W=a(85),A=a.n(W),D=Object(h.a)((function(e){return Object(S.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},userLabel:{marginLeft:e.spacing(4)}})})),z=Object(j.a)((function(){var e=D(),t=Object(i.f)(),a=Object(n.useContext)(E).userStore,o=a.user,c=a.logout;return r.a.createElement("div",{className:e.root},r.a.createElement(C.a,{position:"static"},r.a.createElement(N.a,null,r.a.createElement(T.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(U.a,null)),r.a.createElement(f.a,{variant:"h6",className:e.title},"Example SPA app"),r.a.createElement(B,{to:"/"},"Home"),r.a.createElement(B,{to:"products"},"Products"),r.a.createElement(B,{to:"chat"},"Chat"),(null===o||void 0===o?void 0:o.username)?r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{className:e.userLabel,label:"Hello ".concat(o.username,"!")}),r.a.createElement(I.a,{label:"Logout",clickable:!0,color:"primary",onClick:function(){c(),t.push({pathname:"/login"})},icon:r.a.createElement(A.a,null)})):r.a.createElement(B,{to:"login"},"Login"))))}));var L=function(){return r.a.createElement(y.a,{elevation:3},"Work in Progress")},M=a(86),R=a(182),F=a(178),H=a(179),q=a(180),G=a(181),J=a(87),Q=a.n(J),K=Object(h.a)({root:{maxWidth:445,margin:10,minWidth:190}});var V=function(e){var t=e.product,a=e.handleDeleteProduct,n=e.canModify,o=void 0!==n&&n,c=K(),i=t.id,l=t.isGoodQuality,s=t.name,u=t.color;return r.a.createElement(F.a,{className:c.root},r.a.createElement(H.a,null,r.a.createElement(q.a,null,r.a.createElement(f.a,{gutterBottom:!0,variant:"h5",component:"h2"},s),r.a.createElement(f.a,{variant:"body2",component:"p"},"Quality product: ",l?"\u2714\ufe0f":"\u274c"),r.a.createElement(f.a,{variant:"body2",component:"p"},"Color: ",u),r.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"p"},"Id: ",i))),r.a.createElement(G.a,null,r.a.createElement(T.a,{color:"secondary","aria-label":"delete product",component:"span",onClick:function(){return a(i)},disabled:!o},r.a.createElement(Q.a,null))))},Y=a(64),$=a.n(Y),X={apiUrl:"http://net-core-app.us1.gearhost.cloud"},Z=a(191),_=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(5),display:"flex",flexDirection:"column",alignItems:"center"},item:{marginBottom:e.spacing(2)}}}));var ee=function(e){Object(M.a)(e);var t=_(),a=(Object(i.f)(),Object(n.useContext)(E).userStore),o=a.authToken,c=a.isModerator,l=Object(n.useState)(!0),u=Object(s.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(""),g=Object(s.a)(d,2),h=g[0],v=g[1],j=Object(n.useState)([]),O=Object(s.a)(j,2),x=O[0],y=O[1];Object(n.useEffect)((function(){w()}),[]);var w=function(){p(!0),y([]);var e=X.apiUrl+"/api/Product";setTimeout((function(){$.a.get(e,{headers:{Authorization:"Bearer "+o},responseType:"json"}).then((function(e){console.log(e),console.log(e.data),y(e.data)})).catch((function(e){console.log(e),e.response&&(console.log(e.response),v("ERROR request get Products! ".concat(e.response.status," ").concat(e.response.statusText)))})).finally((function(){p(!1)}))}),1e3)},k=function(e){p(!0),v("");var t=X.apiUrl+"/api/Product/".concat(e);$.a.delete(t,{headers:{Authorization:"Bearer "+o},responseType:"json"}).then((function(e){console.log(e),console.log(e.data)})).catch((function(e){console.log(e),e.response&&(console.log(e.response),v("ERROR remove product API request! ".concat(e.response.status," ").concat(e.response.statusText)))})).finally((function(){w()}))},S=x.map((function(e){return r.a.createElement(V,{key:e.id,product:e,handleDeleteProduct:k,canModify:c})}));return r.a.createElement(b.a,{component:"main",maxWidth:"md"},r.a.createElement("div",{className:t.paper},r.a.createElement(f.a,{className:t.item,component:"h1",variant:"h5",color:"primary"},"Introducing our amazing products:"),m&&r.a.createElement(R.a,null),S,h&&r.a.createElement(Z.a,{elevation:6,variant:"filled",severity:"error"},h)))},te=a(92),ae=a(190),ne=a(173),re=a(90),oe=a.n(re),ce=a(184),ie=a(185),le=a(186),se=a(187),ue=a(183),me=Object(h.a)((function(e){return{purple:{color:e.palette.getContrastText(ue.a[500]),backgroundColor:ue.a[500]},typo:{wordWrap:"break-word"}}}));var pe=function(e){var t=e.message,a=e.nick,n=e.time,o=me();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{variant:"inset",component:"li"}),r.a.createElement(ie.a,{alignItems:"flex-start"},r.a.createElement(le.a,null,r.a.createElement(u.a,{className:o.purple,alt:"user"},a[0].toUpperCase())),r.a.createElement(se.a,{className:o.typo,primary:t,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{component:"span",variant:"body2",color:"textPrimary"},n," - ",a))})))},de=Object(h.a)((function(e){return{main:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},box:{display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(4)},messagebox:{paddingTop:0,boxShadow:"inset 5px 5px 15px 5px rgba(0,0,0,0)"},inpuitMessage:{width:"100%"},chatBox:{width:450,maxHeight:400,minHeight:400,marginTop:e.spacing(2),marginBottom:e.spacing(2),backgroundColor:e.palette.background.default,boxShadow:"inset rgba(0, 0, 0, 0.2) 0px 3px 3px -2px, inset rgba(0, 0, 0, 0.14) 0px 3px 4px 0px, inset rgba(0, 0, 0, 0.12) 0px 1px 8px 0px"}}})),ge=[{message:"Chat \ud83d\udcac with other website users & feel power of websockets. You can also open the page in a different browser and chat from both!",user:"Bot",time:oe()().format("HH:mm:ss")}];var fe=function(){var e=de(),t=Object(n.useState)((new te.a).withUrl(X.apiUrl+"/chat").build()),a=Object(s.a)(t,1)[0],o=Object(n.useContext)(E).userStore.user,c=Object(n.useState)(ge),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Object(n.useState)(""),g=Object(s.a)(d,2),h=g[0],b=g[1],v=Object(n.useState)(""),j=Object(s.a)(v,2),O=j[0],x=j[1],w=(null===o||void 0===o?void 0:o.userFullName)||"Anonymous",k=Object(n.useRef)();Object(n.useEffect)((function(){var e;k.current&&(k.current.scrollTop=null===(e=k.current)||void 0===e?void 0:e.scrollHeight)}),[l]),Object(n.useEffect)((function(){return a.start().then((function(){return console.log("Connection started!")})).catch((function(){return console.log("Error while establishing connection :(")})),a.on("sendToAll",(function(e,t,a){u((function(n){return n.concat({message:t,user:e,time:a})}))})),function(){a.stop()}}),[a]);var S=function(){C(h)&&a.invoke("sendToAll",w,h).then((function(){b("")})).catch((function(e){return console.error(e)}))},C=function(e){var t=e?"":"Write something.";return x(t),!t},N=l.map((function(e,t){return r.a.createElement(pe,{key:t,nick:e.user,message:e.message,time:e.time})}));return r.a.createElement("div",{className:e.main},r.a.createElement(y.a,{className:e.box},r.a.createElement(f.a,{color:"primary",variant:"h4",component:"h5"},"Chat Box"),r.a.createElement(ae.a,Object.assign({ref:k},{boxShadow:"3",className:e.chatBox,overflow:"auto"}),r.a.createElement(ne.a,{className:e.messagebox},N)),r.a.createElement(p.a,{error:!!O,helperText:O,onChange:function(e){b(e.target.value),C(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&S()},className:e.inpuitMessage,value:h,autoFocus:!0}),r.a.createElement(m.a,{onClick:S},"Send message")))};var he=Object(j.a)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null),r.a.createElement(z,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/login"},r.a.createElement(x,null)),r.a.createElement(i.a,{exact:!0,path:"/register"},r.a.createElement(L,null)),r.a.createElement(i.a,{exact:!0,path:"/products"},r.a.createElement(ee,null)),r.a.createElement(i.a,{exact:!0,path:"/chat"},r.a.createElement(fe,null)),r.a.createElement(i.a,{path:"/"},r.a.createElement(k,null))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be,Ee,ve,je,Oe,xe=a(49),ye=a(56),we=a(91),ke=a(36),Se=(a(137),a(8)),Ce=(be=function(){function e(){Object(ye.a)(this,e),Object(xe.a)(this,"user",Ee,this),Object(xe.a)(this,"authToken",ve,this),Object(xe.a)(this,"logout",je,this),Object(xe.a)(this,"authorizeUser",Oe,this),Object(Se.n)(this)}return Object(we.a)(e,[{key:"isUserLogged",get:function(){var e;return!!(null===(e=this.user)||void 0===e?void 0:e.username)&&!!this.authToken}},{key:"isModerator",get:function(){var e,t;return!!(null===(e=this.user)||void 0===e||null===(t=e.roles)||void 0===t?void 0:t.some((function(e){return"Moderator"===e||"Administrator"===e})))&&this.isUserLogged}}]),e}(),Ee=Object(ke.a)(be.prototype,"user",[Se.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ve=Object(ke.a)(be.prototype,"authToken",[Se.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(ke.a)(be.prototype,"isUserLogged",[Se.g],Object.getOwnPropertyDescriptor(be.prototype,"isUserLogged"),be.prototype),Object(ke.a)(be.prototype,"isModerator",[Se.g],Object.getOwnPropertyDescriptor(be.prototype,"isModerator"),be.prototype),je=Object(ke.a)(be.prototype,"logout",[Se.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.user.username="",e.authToken=null}}}),Oe=Object(ke.a)(be.prototype,"authorizeUser",[Se.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){return fetch(X.apiUrl+"/api/authentication/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})}).then((function(t){200==t.status?t.json().then((function(t){var a=t;e.user={id:a.userId,username:a.userName,userFullName:a.userFullName,roles:a.roles},e.authToken=a.token})):t.json().then((function(e){console.info("Api response",e)}))})).catch((function(e){return console.error("Error:",e),"error"})),null}}}),be),Ne=a(61);new Ce;c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,{store:new function e(){Object(ye.a)(this,e),this.userStore=void 0,this.userStore=new Ce}},r.a.createElement(Ne.a,null,r.a.createElement(he,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.e77c8c15.chunk.js.map